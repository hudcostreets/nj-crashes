(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[211],{51211:function(e,t,n){"use strict";n.r(t),n.d(t,{DefaultDbPath:function(){return g},DefaultQuery:function(){return b},Input:function(){return v},QueryKey:function(){return p},UrlKey:function(){return f},default:function(){return j}});var r=n(11527),l=n(50959),c=n(14075),u=n(6039),s=n.n(u),a=n(33083),o=n(71288),i=n(56164);function d(e){let{result:t}=e;return t&&(0,i.g_)(e=>(0,r.jsxs)("div",{className:s().sqlError,children:[(0,r.jsx)("h2",{children:"Error"}),(0,r.jsx)("pre",{children:e.message})]}),e=>(0,r.jsxs)("table",{children:[(0,r.jsx)("thead",{children:(0,r.jsx)("tr",{children:(null==e?void 0:e.length)?(0,o.XP)(e[0]).map((e,t)=>(0,r.jsx)("th",{children:e},t)):null})}),(0,r.jsx)("tbody",{children:null==e?void 0:e.map((e,t)=>(0,r.jsx)("tr",{children:(0,o.VO)(e).map((e,t)=>(0,r.jsx)("td",{children:e},t))},t))})]}))(t)}var h=n(95409);let f="sql-db-url",p="sql-query";function v(e){let{label:t,defaultValue:n,buttons:c,...u}=e,[a,o]=(0,l.useState)(n);(0,l.useEffect)(()=>{o(n)},[n]);let[i,d]=(0,l.useState)(null),h=(0,l.createRef)();return(0,l.useEffect)(()=>{h.current&&(console.log("set initial scrollHeight"),d(h.current.scrollHeight))},[h.current]),(0,r.jsxs)("div",{className:s().control,children:[(0,r.jsxs)("label",{children:[t,(0,r.jsx)("textarea",{ref:h,style:i?{height:"".concat(i,"px")}:{},value:a,onInput:e=>{d(e.target.scrollHeight)},onChange:e=>o(e.target.value),onKeyDown:e=>{"Enter"===e.code&&e.shiftKey&&(e.preventDefault(),c[0].cb(a))},...u})]}),c.map(e=>{let{value:t,cb:n}=e;return(0,r.jsx)("input",{type:"button",value:t,className:s().updateButton,onClick:()=>{n(a)}},t)})]})}let g=(0,h.mB)().crashes,b="select * from crashes where id=100000";function j(){let[e,t]=(0,c.Z)(f,{defaultValue:"".concat(g)}),[n,u]=(0,c.Z)(p,{defaultValue:b}),[s,o]=(0,l.useState)(65536),[i,h]=(0,l.useState)(null),j=null;try{j=(0,a.o8)({url:e,requestChunkSize:s,setResult:h})}catch(e){console.error("Caught error:",e)}return(0,r.jsxs)("div",{children:[(0,r.jsx)(v,{label:"DB URL:",buttons:[{value:"Update",cb:e=>{console.log("Updating URL:",e),t(e)}}],defaultValue:e}),(0,r.jsx)(v,{label:"Query:",buttons:[{value:"Run",cb:e=>{if(u(e),j){let t=e.split(";\n\n");t.length>1?(console.log("Running ".concat(t.length," queries")),t.reduce((e,t)=>j&&e?e.then(()=>{var e;return console.log("Running query:",t),j&&(null!==(e=j(t))&&void 0!==e?e:Promise.resolve())}):null,Promise.resolve())):(console.log("Running query:",e),j(e))}}},{value:"Explain",cb:e=>{u(e);let t="explain query plan ".concat(e);console.log("Running query:",t),j&&j(t)}}],defaultValue:n}),(0,r.jsx)(d,{result:i})]})}},95409:function(e,t,n){"use strict";n.d(t,{Iv:function(){return s},jy:function(){return u},mB:function(){return a}});var r=n(72463),l=n(71288),c=n(65688);let u="https://nj.gov/njsp/info/fatalacc/",s="https://www.state.nj.us/transportation/refdata/accident/rawdata01-current.shtm";function a(){let{local:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e){let{local:t,name:n,urls:u}=e,s=c.cwd(),a=t?"".concat(s,"/public/").concat(n):"".concat((0,r.b)(),"/").concat(n),o=c.env.S3_DBS?"https://nj-crashes.s3.amazonaws.com/".concat(n,"/data"):a;return(0,l.Q8)(u,(e,t)=>"".concat(o,"/").concat(t))}({local:e,name:"njdot",urls:{crashes:"crashes.db",occupants:"occupants.db",pedestrians:"pedestrians.db",vehicles:"vehicles.db",drivers:"drivers.db",cmymc:"cmymc.db"}})}},6039:function(e){e.exports={control:"sql-repl_control__baLnI"}}}]);